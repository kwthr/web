---
section: get-started

order: 4

navigationTitle: "混用选择器"

title: "纠缠选择器"
description: "如何使用Stylify CSS编译器来处理HTML类选择器。"
---
import Note from '@components/Note.astro';

选择器处理是一个更高层次的优化，它将长的选择器如`.color\:blue`转换为短的`.a`。
这可以大大减少CSS和HTML的大小。它也使得通过复制粘贴你的源代码来 "窃取 "你的网页设计更加困难。

## 配置
Mangling默认是关闭的，你必须启用它。

### 编译器

当你想通过直接使用编译器在你的自定义编译中混合选择器时，你必须设置编译器选项 => `mangleSelectors: true`。

When you want to mangle selectors within your custom compilation by using Compiler directly, you must set the compiler option => `mangleSelectors: true`.

```javascript
import { Compiler } from '@stylify/stylify';

const content = '';

const compiler = new Compiler({
	mangleSelectors: true
});

const compilationResult = compiler.compile(content);
const mangledContent = compiler.rewriteSelectors(content, compilationResult);
const css = compilationResult.generateCss();
```

### @stylify/bundler
捆绑器在引擎盖下使用编译器。如果你想启用mangling，请在编译器配置中启用`mangleSelectors`：

[Bundler docs](/zh/docs/bundler)

```js
const bundler = new Bundler({
	compiler: {
		// 只有在捆绑器不观察文件时，这才会生效。
		mangleSelectors: true
	}
})
```

### @stylify/unplugin
当你在unplugin中启用mangling时，选择器会直接在源代码中被mangling（与bundler的方式相同）。
这是因为在使用该插件的捆绑器（Vite、Webpack、Rollup......）所提供的内容中进行纠错并不可靠，因为这些内容经常被其他插件和框架改变。
选择器只有在捆绑器不处于观察模式时才会被处理，所以你的本地环境应该不会受到影响，除非你直接在本地主机上运行构建。

[@stylify/unplugin docs](/zh/docs/unplugin)

<Note>如果你需要在localhost上运行生产构建，在你运行生产构建的命令之前，先阶段性/提交或备份你的修改。
当你在localhost上检查了生产构建后，你可以很容易地恢复Stylify所做的修改。</Note>

```js
const config = {
	compiler: {
		// 这只有在使用该插件的捆绑器时才会生效、
		// 没有在观察模式下运行
		mangleSelectors: true
	}
}
```

### @stylify/astro

[@stylify/astro docs](/zh/docs/astro)

Astro插件使用与unplugin相同的配置：
```js
const config = {
	compiler: {
		mangleSelectors: true
	}
}
```

### @stylify/nuxt

[@stylify/nuxt docs](/zh/docs/nuxt)

Nuxt插件使用与unplugin相同的配置：
```js
const config = {
	compiler: {
		mangleSelectors: true
	}
}
```

### @stylify/nuxt-module
Nuxt模块自动设置了mangling，并使用了一个专门为Nuxt 2准备的旧的webpack插件。
你不需要在那里配置任何东西。

[@stylify/nuxt-module docs](/zh/docs/nuxt-module)

但是你可以通过设置`mangleSelectors: false`来禁用混用：

```js
const config = {
	compiler: {
		mangleSelectors: false
	}
}
```
